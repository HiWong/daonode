// Generated by CoffeeScript 1.6.2
(function() {
  var INDEX, ObjecttoString, andp, any, assign, begin, bind, block, break_, char, charIn, charWhen, continue_, defaultLabel, funcall, getvalue, greedyany, headList, if_, iff, inc, incp, index, io, isArray, isInteger, isLabel, isNumber, isObject, isString, jsbreak, jscontinue, jsfun, lambda, lazyany, list, listTail, macro, makeLabel, name, not_, orp, orp2, orp3, push, pushp, quasiquote, sideEffect, string, stringIn, stringIn0, stringWhile, stringWhile0, times, unify, uniqueconst, uniquevar, unquote, unquoteSlice, vari, variable, _i, _j, _len, _ref, _ref1, _results,
    __slice = [].slice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  ObjecttoString = Object.prototype.toString;

  exports.isNumber = isNumber = function(x) {
    return ObjecttoString.call(x) === '[object Number]';
  };

  exports.isInteger = isInteger = function(x) {
    return ObjecttoString.call(x) === '[object Number]' && x % 1 === 0;
  };

  exports.isString = isString = function(x) {
    return ObjecttoString.call(x) === '[object String]';
  };

  exports.isArray = isArray = function(x) {
    return ObjecttoString.call(x) === '[object Array]';
  };

  exports.isObject = isObject = function(x) {
    return x === Object(x);
  };

  _ref = (function() {
    _results = [];
    for (_i = 1; _i < 200; _i++){ _results.push(_i); }
    return _results;
  }).apply(this), exports.QUOTE = _ref[0], exports.EVAL = _ref[1], exports.STRING = _ref[2], exports.BEGIN = _ref[3], exports.NONLOCAL = _ref[4], exports.VARIABLE = _ref[5], exports.UNIQUEVAR = _ref[6], exports.UNIQUECONST = _ref[7], exports.ASSIGN = _ref[8], exports.AUGMENTASSIGN = _ref[9], exports.INC = _ref[10], exports.SUFFIXINC = _ref[11], exports.DEC = _ref[12], exports.SUFFIXDEC = _ref[13], exports.INCP = _ref[14], exports.SUFFIXINCP = _ref[15], exports.DECP = _ref[16], exports.SUFFIXDECP = _ref[17], exports.IF = _ref[18], exports.RETURN = _ref[19], exports.JSTHROW = _ref[20], exports.SWITCH = _ref[21], exports.JSFUN = _ref[22], exports.DIRECT = _ref[23], exports.PURE = _ref[24], exports.EFFECT = _ref[25], exports.IO = _ref[26], exports.LAMDA = _ref[27], exports.MACRO = _ref[28], exports.EVALARG = _ref[29], exports.ARRAY = _ref[30], exports.UARRAY = _ref[31], exports.MAKEOBJECT = _ref[32], exports.UOBJECT = _ref[33], exports.CONS = _ref[34], exports.FUNCALL = _ref[35], exports.MACROCALL = _ref[36], exports.JSFUNCALL = _ref[37], exports.FOR = _ref[38], exports.FORIN = _ref[39], exports.FOROF = _ref[40], exports.TRY = _ref[41], exports.BLOCK = _ref[42], exports.BREAK = _ref[43], exports.CONTINUE = _ref[44], exports.CATCH = _ref[45], exports.THROW = _ref[46], exports.UNWINDPROTECT = _ref[47], exports.CALLCC = _ref[48], exports.CALLFC = _ref[49], exports.QUASIQUOTE = _ref[50], exports.UNQUOTE = _ref[51], exports.UNQUOTESLICE = _ref[52], exports.PUSH = _ref[53], exports.LIST = _ref[54], INDEX = _ref[55], exports.ATTR = _ref[56], exports.LENGTH = _ref[57], exports.SLICE = _ref[58], exports.POP = _ref[59], exports.INSTANCEOF = _ref[60], exports.LOGICVAR = _ref[61], exports.DUMMYVAR = _ref[62], exports.UNIFY = _ref[63], exports.NOTUNIFY = _ref[64], exports.IS = _ref[65], exports.BIND = _ref[66], exports.GETVALUE = _ref[67], exports.SUCCEED = _ref[68], exports.FAIL = _ref[69], exports.PUSHP = _ref[70], exports.ORP = _ref[71], exports.ORP2 = _ref[72], exports.ORP3 = _ref[73], exports.NOTP = _ref[74], exports.NOTP2 = _ref[75], exports.NOTP3 = _ref[76], exports.IFP = _ref[77], exports.REPEAT = _ref[78], exports.CUTABLE = _ref[79], exports.CUT = _ref[80], exports.FINDALL = _ref[81], exports.ONCE = _ref[82], exports.PARSE = _ref[83], exports.PARSEDATA = _ref[84], exports.SETPARSERSTATE = _ref[85], exports.SETPARSERDATA = _ref[86], exports.SETPARSERCURSOR = _ref[87], exports.GETPARSERSTATE = _ref[88], exports.GETPARSERDATA = _ref[89], exports.GETPARSERCURSOR = _ref[90], exports.EOI = _ref[91], exports.BOI = _ref[92], exports.EOL = _ref[93], exports.BOL = _ref[94], exports.STEP = _ref[95], exports.LEFTPARSERDATA = _ref[96], exports.SUBPARSERDATA = _ref[97], exports.NEXTCHAR = _ref[98], exports.MAY = _ref[99], exports.LAZYMAY = _ref[100], exports.GREEDYMAY = _ref[101], exports.ANY = _ref[102], exports.LAZYANY = _ref[103], exports.GREEDYANY = _ref[104], exports.PARALLEL = _ref[105], exports.FOLLOW = _ref[106], exports.NOTFOLLOW = _ref[107], exports.ADD = _ref[108], exports.SUB = _ref[109], exports.MUL = _ref[110], exports.DIV = _ref[111], exports.MOD = _ref[112], exports.AND = _ref[113], exports.OR = _ref[114], exports.NOT = _ref[115], exports.BITAND = _ref[116], exports.BITOR = _ref[117], exports.BITXOR = _ref[118], exports.LSHIFT = _ref[119], exports.RSHIFT = _ref[120], exports.EQ = _ref[121], exports.NE = _ref[122], exports.LE = _ref[123], exports.LT = _ref[124], exports.GT = _ref[125], exports.GE = _ref[126], exports.NEG = _ref[127], exports.BITNOT = _ref[128];

  exports.SEXPR_HEAD_FIRST = 1;

  exports.SEXPR_HEAD_LAST = exports.BITNOT;

  vari = function(name) {
    return name;
  };

  exports.vars = function(names) {
    var name, _j, _len, _ref1, _results1;

    _ref1 = split(names, reElements);
    _results1 = [];
    for (_j = 0, _len = _ref1.length; _j < _len; _j++) {
      name = _ref1[_j];
      _results1.push(vari(name));
    }
    return _results1;
  };

  exports.nonlocal = function() {
    var names;

    names = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.NONLOCAL].concat(__slice.call(names));
  };

  exports.variable = variable = function() {
    var names;

    names = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.VARIABLE].concat(__slice.call(names));
  };

  exports.string = string = function(s) {
    return [exports.STRING, s];
  };

  exports.quote = function(exp) {
    return [exports.QUOTE, exp];
  };

  exports.eval_ = function(exp, path) {
    return [exports.EVAL, exp, path];
  };

  exports.begin = begin = function() {
    var exps;

    exps = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.BEGIN].concat(__slice.call(exps));
  };

  exports.assign = assign = function(left, exp) {
    return [exports.ASSIGN, left, exp];
  };

  exports.addassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'add', left, exp];
  };

  exports.subassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'sub', left, exp];
  };

  exports.mulassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'mul', left, exp];
  };

  exports.divassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'div', left, exp];
  };

  exports.modassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'mod', left, exp];
  };

  exports.andassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'and_', left, exp];
  };

  exports.orassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'or_', left, exp];
  };

  exports.bitandassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'bitand', left, exp];
  };

  exports.bitorassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'bitor', left, exp];
  };

  exports.bitxorassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'bitxor', left, exp];
  };

  exports.lshiftassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'lshift', left, exp];
  };

  exports.rshiftassign = function(left, exp) {
    return [exports.AUGMENTASSIGN, 'rshift', left, exp];
  };

  exports.if_ = if_ = function(test, then_, else_) {
    return [exports.IF, test, then_, else_];
  };

  exports.iff = iff = function(clauses, else_) {
    var length, test, then_, _ref1;

    length = clauses.length;
    if (length === 0) {
      throw new Error("iff clauses should have at least one clause.");
    } else {
      _ref1 = clauses[0], test = _ref1[0], then_ = _ref1[1];
      if (length === 1) {
        return if_(test, then_, else_);
      } else {
        return if_(test, then_, iff(clauses.slice(1), else_));
      }
    }
  };

  exports.switch_ = function() {
    var clauses, test;

    test = arguments[0], clauses = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.SWITCH, test].concat(__slice.call(clauses));
  };

  exports.return_ = function(value) {
    return [exports.RETURN, value];
  };

  exports.jsthrow = function(value) {
    return [exports.JSTHROW, value];
  };

  exports.array = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.ARRAY].concat(__slice.call(args));
  };

  exports.uarray = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.UARRAY].concat(__slice.call(args));
  };

  exports.cons = function(head, tail) {
    return [exports.CONS, head, tail];
  };

  exports.makeobject = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.MAKEOBJECT].concat(__slice.call(args));
  };

  exports.uobject = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.UOBJECT].concat(__slice.call(args));
  };

  exports.funcall = funcall = function() {
    var args, caller;

    caller = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.FUNCALL, caller].concat(__slice.call(args));
  };

  exports.jsfuncall = function() {
    var args, caller;

    caller = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.JSFUNCALL, caller].concat(__slice.call(args));
  };

  exports.macall = function() {
    var args, caller;

    caller = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.MACROCALL, caller].concat(__slice.call(args));
  };

  exports.jsobject = function(exp) {
    return [exports.JSOBJECT, exp];
  };

  exports.jsfun = jsfun = function(exp) {
    return [exports.JSFUN, exp];
  };

  exports.print_ = function() {
    var exps;

    exps = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.JSFUNCALL, io(jsfun('console.log'))].concat(exps);
  };

  exports.direct = function(exp) {
    return [exports.DIRECT, exp];
  };

  exports.pure = io = function(exp) {
    return [exports.PURE, exp];
  };

  exports.effect = sideEffect = function(exp) {
    return [exports.EFFECT, exp];
  };

  exports.io = io = function(exp) {
    return [exports.IO, exp];
  };

  exports.lamda = lambda = function() {
    var body, params;

    params = arguments[0], body = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.LAMDA, params].concat(body);
  };

  exports.macro = macro = function() {
    var body, params;

    params = arguments[0], body = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.MACRO, params].concat(body);
  };

  exports.qq = quasiquote = function(exp) {
    return [exports.QUASIQUOTE, exp];
  };

  exports.uq = unquote = function(exp) {
    return [exports.UNQUOTE, exp];
  };

  exports.uqs = unquoteSlice = function(exp) {
    return [exports.UNQUOTESLICE, exp];
  };

  isLabel = function(label) {
    return isArray(label) && label.length === 2 && label[0] === 'label';
  };

  exports.makeLabel = makeLabel = function(label) {
    return ['label', label];
  };

  defaultLabel = ['label', ''];

  exports.block = block = function() {
    var body, label;

    label = arguments[0], body = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    if (!isLabel(label)) {
      label = makeLabel('');
      body = [exports.label].concat(body);
    }
    return [exports.BLOCK, label].concat(__slice.call(body));
  };

  exports.break_ = break_ = function(label, value) {
    if (label == null) {
      label = defaultLabel;
    }
    if (value == null) {
      value = null;
    }
    if (value !== null && !isLabel(label)) {
      throw new TypeError([exports.label, value]);
    }
    if (value === null && !isLabel(label)) {
      value = label;
      label = makeLabel('');
    }
    return [exports.BREAK, label, value];
  };

  exports.continue_ = continue_ = function(label) {
    if (label == null) {
      label = defaultLabel;
    }
    return [exports.CONTINUE, label];
  };

  exports.jsbreak = jsbreak = function(label) {
    return [exports.JSBREAK, label];
  };

  exports.jscontinue_ = jscontinue = function(label) {
    return [exports.JSCONTINUE, label];
  };

  exports.loop_ = function() {
    var body, label;

    label = arguments[0], body = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    if (!isLabel(label)) {
      label = defaultLabel;
      body = [exports.label].concat(body);
    }
    return block.apply(null, [label].concat(__slice.call(body.concat([exports.continue_(label)]))));
  };

  exports.while_ = function() {
    var body, label, test;

    label = arguments[0], test = arguments[1], body = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
    if (!isLabel(label)) {
      label = defaultLabel;
      test = label;
      body = [exports.test].concat(body);
    }
    return block.apply(null, [label].concat(__slice.call([exports.if_(not_(test), break_(label))].concat(body).concat([exports.continue_(label)]))));
  };

  exports.until_ = function() {
    var body, label, test, _j;

    label = arguments[0], body = 3 <= arguments.length ? __slice.call(arguments, 1, _j = arguments.length - 1) : (_j = 1, []), test = arguments[_j++];
    if (!isLabel(label)) {
      label = defaultLabel;
      test = label;
      body = [exports.test].concat(body);
    }
    body = body.concat([exports.if_(not_(test), continue_(label))]);
    return block.apply(null, [label].concat(__slice.call(body)));
  };

  exports.dowhile = function() {
    var body, label, test, _j;

    label = arguments[0], body = 3 <= arguments.length ? __slice.call(arguments, 1, _j = arguments.length - 1) : (_j = 1, []), test = arguments[_j++];
    if (!isLabel(label)) {
      label = defaultLabel;
      test = label;
      body = [exports.test].concat(body);
    }
    body = body.concat([exports.if_(test, continue_(label))]);
    return block.apply(null, [label].concat(__slice.call(body)));
  };

  exports.for_ = function() {
    var body, init, step, test;

    init = arguments[0], test = arguments[1], step = arguments[2], body = 4 <= arguments.length ? __slice.call(arguments, 3) : [];
    return [exports.FOR, init, test, step].concat(__slice.call(body));
  };

  exports.forin = function() {
    var body, container, vari;

    vari = arguments[0], container = arguments[1], body = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
    return [exports.FORIN, vari, container].concat(__slice.call(body));
  };

  exports.try_ = function(test, catches, final) {
    return [exports.TRY, test, catches, final];
  };

  exports.catch_ = function() {
    var forms, tag;

    tag = arguments[0], forms = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.CATCH, tag].concat(__slice.call(forms));
  };

  exports.throw_ = function(tag, form) {
    return [exports.THROW, tag, form];
  };

  exports.protect = function() {
    var cleanup, form;

    form = arguments[0], cleanup = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return [exports.UNWINDPROTECT, form].concat(__slice.call(cleanup));
  };

  exports.callcc = function(fun) {
    return [exports.CALLCC, fun];
  };

  exports.callfc = function(fun) {
    return [exports.CALLFC, fun];
  };

  exports.inc = inc = function(item) {
    return [exports.INC, item];
  };

  exports.suffixinc = function(item) {
    return [exports.SUFFIXINC, item];
  };

  exports.dec = function(item) {
    return [exports.DEC, item];
  };

  exports.suffixdec = function(item) {
    return [exports.SUFFIXDEC, item];
  };

  exports.incp = incp = function(item) {
    return [exports.INCP, item];
  };

  exports.suffixincp = function(item) {
    return [exports.SUFFIXINCP, item];
  };

  exports.decp = function(item) {
    return [exports.DECP, item];
  };

  exports.suffixdecp = function(item) {
    return [exports.SUFFIXDECP, item];
  };

  exports.add = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.ADD].concat(__slice.call(args));
  };

  exports.sub = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.SUB].concat(__slice.call(args));
  };

  exports.mul = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.MUL].concat(__slice.call(args));
  };

  exports.div = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.DIV].concat(__slice.call(args));
  };

  exports.mod = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.MOD].concat(__slice.call(args));
  };

  exports.and_ = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.AND].concat(__slice.call(args));
  };

  exports.or_ = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.OR].concat(__slice.call(args));
  };

  exports.not_ = not_ = function(x) {
    return [exports.NOT, x];
  };

  exports.bitand = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.BITAND].concat(__slice.call(args));
  };

  exports.bitor = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.BITOR].concat(__slice.call(args));
  };

  exports.bitxor = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.BITXOR].concat(__slice.call(args));
  };

  exports.lsfhift = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.LSHIFT].concat(__slice.call(args));
  };

  exports.rshift = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.RSHIFT].concat(__slice.call(args));
  };

  exports.eq = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.EQ].concat(__slice.call(args));
  };

  exports.ne = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.NE].concat(__slice.call(args));
  };

  exports.le = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.LE].concat(__slice.call(args));
  };

  exports.lt = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.LT].concat(__slice.call(args));
  };

  exports.gt = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.GT].concat(__slice.call(args));
  };

  exports.ge = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.GE].concat(__slice.call(args));
  };

  exports.neg = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.NEG].concat(__slice.call(args));
  };

  exports.bitnot = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.BITNOT].concat(__slice.call(args));
  };

  exports.index = index = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.INDEX].concat(__slice.call(args));
  };

  exports.push = push = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.PUSH].concat(__slice.call(args));
  };

  exports.list = list = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.LIST].concat(__slice.call(args));
  };

  exports.headList = headList = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.HEADLIST].concat(__slice.call(args));
  };

  exports.listTail = listTail = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.LISTTAIL].concat(__slice.call(args));
  };

  exports.pushp = pushp = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.PUSHP].concat(__slice.call(args));
  };

  exports.attr = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.ATTR].concat(__slice.call(args));
  };

  exports.length = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.LENGTH].concat(__slice.call(args));
  };

  exports.slice = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.SLICE].concat(__slice.call(args));
  };

  exports.pop = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.POP].concat(__slice.call(args));
  };

  exports["instanceof"] = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.INSTANCEOF].concat(__slice.call(args));
  };

  exports.logicvar = function(name) {
    return [exports.LOGICVAR, name];
  };

  exports.dummy = function(name) {
    return [exports.DUMMYVAR, name];
  };

  exports.unify = unify = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.UNIFY].concat(__slice.call(args));
  };

  exports.notunify = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.NOTUNIFY].concat(__slice.call(args));
  };

  exports.succeed = [exports.SUCCEED];

  exports.fail = [exports.FAIL];

  exports.andp = andp = exports.begin;

  exports.orp = orp = function() {
    var exps, length;

    exps = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    length = exps.length;
    if (length === 0) {
      throw new ArgumentError(exps);
    } else if (length === 1) {
      return exps[0];
    } else if (length === 2) {
      return [exports.ORP].concat(__slice.call(exps));
    } else {
      return [exports.ORP, exps[0], orp.apply(null, exps.slice(1))];
    }
  };

  exports.orp2 = orp2 = function() {
    var exps, length;

    exps = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    length = exps.length;
    if (length === 0) {
      throw new ArgumentError(exps);
    } else if (length === 1) {
      return exps[0];
    } else if (length === 2) {
      return [exports.ORP2].concat(__slice.call(exps));
    } else {
      return [exports.ORP2, exps[0], orp2.apply(null, exps.slice(1))];
    }
  };

  exports.orp3 = orp3 = function() {
    var exps, length;

    exps = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    length = exps.length;
    if (length === 0) {
      throw new ArgumentError(exps);
    } else if (length === 1) {
      return exps[0];
    } else if (length === 2) {
      return [exports.ORP3].concat(__slice.call(exps));
    } else {
      return [exports.ORP3, exps[0], orp3.apply(null, exps.slice(1))];
    }
  };

  exports.notp = function(goal) {
    return [exports.NOTP, goal];
  };

  exports.notp2 = function(goal) {
    return [exports.NOTP2, goal];
  };

  exports.notp3 = function(goal) {
    return [exports.NOTP3, goal];
  };

  exports.repeat = [exports.REPEAT];

  exports.cutable = function(goal) {
    return [exports.CUTABLE, goal];
  };

  exports.cut = [exports.CUT];

  exports.once = function(goal) {
    return [exports.ONCE, goal];
  };

  exports.findall = function(goal, result, template) {
    return [exports.FINDALL, goal, result, template];
  };

  exports.is_ = function(vari, exp) {
    return [exports.IS, vari, exp];
  };

  exports.bind = bind = function(vari, term) {
    return [exports.BIND, vari, term];
  };

  exports.getvalue = getvalue = function(term) {
    return [exports.GETVALUE, term];
  };

  exports.parse = function(exp, state) {
    return [exports.PARSE, exp, state];
  };

  exports.parsedata = exports.parsetext = function(exp, data) {
    return [exports.PARSEDATA, exp, data];
  };

  exports.setdata = exports.settext = function(data) {
    return [exports.SETPARSERDATA, data];
  };

  exports.setcursor = function(cursor) {
    return [exports.SETPARSERCURSOR, cursor];
  };

  exports.setstate = function(state) {
    return [exports.SETPARSERSTATE, state];
  };

  exports.getstate = [exports.GETPARSERSTATE];

  exports.getdata = [exports.GETPARSERDATA];

  exports.getcursor = [exports.GETPARSERCURSOR];

  exports.eoi = [exports.EOI];

  exports.boi = [exports.BOI];

  exports.eol = [exports.EOL];

  exports.bol = [exports.BOL];

  exports.step = function(n) {
    return [exports.STEP, n];
  };

  exports.leftdata = [exports.LEFTPARSERDATA];

  exports.subdata = function(length, start) {
    return [exports.SUBPARSERDATA, length, start];
  };

  exports.nextchar = [exports.NEXTCHAR];

  exports.may = function(exp) {
    return [exports.MAY, exp];
  };

  exports.lazymay = function(exp) {
    return [exports.LAZYMAY, exp];
  };

  exports.greedymay = function(exp) {
    return [exports.GREEDYMAY, exp];
  };

  index = 1;

  exports.uniquevar = uniquevar = function(name) {
    return [exports.UNIQUEVAR, name, index++];
  };

  exports.uniqueconst = uniqueconst = function(name) {
    return [exports.UNIQUECONST, name, index++];
  };

  exports.any = any = function(exp, result, template) {
    var result1;

    if (result == null) {
      return [exports.ANY, exp];
    } else {
      result1 = uniqueconst('result');
      return begin(assign(result1, []), any(andp(exp, push(result1, getvalue(template)))), unify(result, result1));
    }
  };

  exports.lazyany = lazyany = function(exp, result, template) {
    var result1;

    if (result == null) {
      return [exports.LAZYANY, exp];
    } else {
      result1 = uniqueconst('result');
      return begin(assign(result1, []), lazyany(andp(exp, push(result1, getvalue(template)))), unify(result, result1));
    }
  };

  exports.greedyany = greedyany = function(exp, result, template) {
    var result1;

    if (result == null) {
      return [exports.GREEDYANY, exp];
    } else {
      result1 = uniqueconst('result');
      return begin(assign(result1, []), greedyany(andp(exp, push(result1, getvalue(template)))), unify(result, result1));
    }
  };

  exports.some = function(exp, result, template) {
    var result1;

    if (result == null) {
      return andp(exp, [exports.ANY, exp]);
    } else {
      result1 = uniqueconst('result');
      return begin(['result'], assign(result1, []), exp, push(result1, getvalue(template)), any(andp(exp, push(result1, getvalue(template)))), unify(result, result1));
    }
  };

  exports.lazysome = function(exp, result, template) {
    var result1;

    if (result == null) {
      return andp(exp, [exports.LAZYANY, exp]);
    } else {
      result1 = uniqueconst('result');
      return begin(assign(result1, []), exp, push(result1, getvalue(template)), lazyany(andp(exp, push(result1, getvalue(template)))), unify(result, result1));
    }
  };

  exports.greedysome = function(exp, result, template) {
    var result1;

    if (result == null) {
      return andp(exp, [exports.GREEDYANY, exp]);
    } else {
      result1 = uniqueconst('result');
      return begin(assign(result1, []), exp, push(result1, getvalue(template)), greedyany(andp(exp, push(result1, getvalue(template)))), unify(result, result1));
    }
  };

  exports.times = times = function(exp, expectTimes, result, template) {
    var n, result1;

    n = uniquevar('n');
    if (result == null) {
      return begin(variable(n), assign(n, 0), any(andp(exp, incp(n))), unify(expectTimes, n));
    } else {
      result1 = uniqueconst('result');
      return begin(variable(n), assign(n, 0), assign(result1, []), any(andp(exp, incp(n), pushp(result1, getvalue(template)))), unify(expectTimes, n), unify(result, result1));
    }
  };

  exports.seplist = function(exp, options) {
    var expectTimes, n, result, result1, sep, template;

    if (options == null) {
      options = {};
    }
    sep = options.sep || char(string(' '));
    expectTimes = options.times || null;
    result = options.result || null;
    template = options.template || null;
    if (result !== null) {
      result1 = uniqueconst('result');
    }
    if (expectTimes === null) {
      if (result === null) {
        return andp(exp, any(andp(sep, exp)));
      } else {
        return andp(assign(result1, []), exp, pushp(result1, getvalue(template)), any(andp(sep, exp, pushp(result1, getvalue(template)))), unify(result, result1));
      }
    } else if (isInteger(expectTimes)) {
      if (result === null) {
        switch (expectTimes) {
          case 0:
            return succeed;
          case 1:
            return exp;
          default:
            return andp(exp, times(andp(sep, exp), expectTimes - 1));
        }
      } else {
        switch (expectTimes) {
          case 0:
            return unify(result, []);
          case 1:
            return andp(exp, unify(result, list(getvalue(template))));
          default:
            return andp(assign(result1, []), exp, pushp(result1, getvalue(template)), times(andp(sep, exp, pushp(result1, getvalue(template))), expectTimes - 1), unify(result, result1));
        }
      }
    } else {
      n = uniquevar('n');
      if (result === null) {
        return orp(andp(variable(n), exp, assign(n, 1), any(andp(sep, exp, incp(n))), unify(expectTimes, n)), unify(expectTimes, 0));
      } else {
        return orp(andp(variable(n), exp, assign(n, 1), assign(result1, list(getvalue(template))), any(andp(sep, exp, pushp(result1, getvalue(template)), incp(n))), unify(expectTimes, n), unify(result, result1)), andp(unify(expectTimes, 0), unify(result, [])));
      }
    }
  };

  exports.parallel = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return [exports.PARALLEL].concat(__slice.call(args));
  };

  exports.follow = function(x) {
    return [exports.FOLLOW, x];
  };

  exports.notfollow = function(x) {
    return [exports.NOTFOLLOW, x];
  };

  _ref1 = ['char', 'followChars', 'notFollowChars', 'charWhen', 'spaces', 'spaces0', 'stringWhile', 'stringWhile0', 'number', 'literal', 'followLiteral', 'notFollowLiteral', 'quoteString', 'identifier'];
  for (_j = 0, _len = _ref1.length; _j < _len; _j++) {
    name = _ref1[_j];
    exports[name] = (function(name) {
      return function() {
        var args;

        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        return funcall.apply(null, [jsfun('parser.' + name), 'solver'].concat(__slice.call(args)));
      };
    })(name);
  }

  char = exports.char;

  charWhen = exports.charWhen;

  stringWhile = exports.stringWhile;

  stringWhile0 = exports.stringWhile0;

  exports.charBetween = function(start, end) {
    return charWhen(function(c) {
      return (start < c && c < end);
    });
  };

  charIn = charIn = function(set) {
    return charWhen(function(c) {
      return __indexOf.call(set, c) >= 0;
    });
  };

  exports.digit = charWhen(function(c) {
    return ('0' <= c && c <= '9');
  });

  exports.digit1_9 = charWhen(function(c) {
    return ('1' <= c && c <= '9');
  });

  exports.lower = charWhen(function(c) {
    return ('a' <= c && c <= 'z');
  });

  exports.upper = charWhen(function(c) {
    return ('A' <= c && c <= 'Z');
  });

  exports.letter = charWhen(function(c) {
    return (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z'));
  });

  exports.underlineLetter = charWhen(function(c) {
    return (c === '_') || (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z'));
  });

  exports.underlineLetterDight = charWhen(function(c) {
    return (c === '_') || (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z')) || (('0' <= c && c <= '9'));
  });

  exports.tabspace = charIn(' \t');

  exports.whitespace = charIn(' \t\r\n');

  exports.newline = charIn('\r\n');

  exports.stringBetween = function(start, end) {
    return stringWhile(function(c) {
      return (start < c && c < end);
    });
  };

  exports.stringIn = stringIn = function(set) {
    return stringWhile(function(c) {
      return __indexOf.call(set, c) >= 0;
    });
  };

  exports.digits = stringWhile(function(c) {
    return ('0' <= c && c <= '9');
  });

  exports.digits1_9 = stringWhile(function(c) {
    return ('1' <= c && c <= '9');
  });

  exports.lowers = stringWhile(function(c) {
    return ('a' <= c && c <= 'z');
  });

  exports.uppers = stringWhile(function(c) {
    return ('A' <= c && c <= 'Z');
  });

  exports.letters = stringWhile(function(c) {
    return (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z'));
  });

  exports.underlineLetters = stringWhile(function(c) {
    return (c === '_') || (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z'));
  });

  exports.underlineLetterDights = stringWhile(function(c) {
    return (c === '_') || (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z')) || (('0' <= c && c <= '9'));
  });

  exports.tabspaces = stringIn(' \t');

  exports.whitespaces = stringIn(' \t\r\n');

  exports.newlinespaces = stringIn('\r\n');

  exports.stringBetween0 = function(start, end) {
    return stringWhile0(function(c) {
      return (start < c && c < end);
    });
  };

  exports.stringIn0 = stringIn0 = function(set) {
    return stringWhile0(function(c) {
      return __indexOf.call(set, c) >= 0;
    });
  };

  exports.digits0 = stringWhile0(function(c) {
    return ('0' <= c && c <= '9');
  });

  exports.digits1_90 = stringWhile0(function(c) {
    return ('1' <= c && c <= '9');
  });

  exports.lowers0 = stringWhile0(function(c) {
    return ('a' <= c && c <= 'z');
  });

  exports.uppers0 = stringWhile0(function(c) {
    return ('A' <= c && c <= 'Z');
  });

  exports.letters0 = stringWhile0(function(c) {
    return (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z'));
  });

  exports.underlineLetters0 = stringWhile0(function(c) {
    return (c === '_') || (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z'));
  });

  exports.underlineLetterDights0 = stringWhile0(function(c) {
    return (c === '_') || (('a' <= c && c <= 'z')) || (('A' <= c && c <= 'Z')) || (('0' <= c && c <= '9'));
  });

  exports.tabspaces0 = stringIn0(' \t');

  exports.whitespaces0 = stringIn0(' \t\r\n');

  exports.newlines0 = stringIn0('\r\n');

}).call(this);

/*
//@ sourceMappingURL=util.map
*/
