// Generated by CoffeeScript 1.6.2
(function() {
  var andp, fail, orp, print_, xexports,
    __slice = [].slice;

  andp = function() {
    var exps;

    exps = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return function(solver) {
      var e, _i, _len;

      for (_i = 0, _len = exps.length; _i < _len; _i++) {
        e = exps[_i];
        e(solver);
      }
      return null;
    };
  };

  orp = function() {
    var exps;

    exps = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return function(solver) {
      solver.failcont = function() {
        return orp.apply(null, exps.slice(1));
      };
      exps[0](solver);
      return null;
    };
  };

  print_ = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return function(solver) {
      return console.log.apply(console, args);
    };
  };

  fail = function(solver) {
    return solver.failcont(solver);
  };

  xexports = {};

  exports.Test = {
    "test print": function(test) {
      var solver;

      solver = {};
      test.equal(print_(1)(solver), null);
      return test.done();
    }
  };

  exports.Test = {
    "test and print": function(test) {
      var solver;

      solver = {};
      test.equal(andp(print_(1), print_(2))(solver), null);
      return test.done();
    }
  };

  exports.Test = {
    "test or print": function(test) {
      var solver;

      solver = {};
      test.equal(orp(fail, print_(2))(solver), null);
      return test.done();
    }
  };

  xexports.Test = {
    "test succeed fail": function(test) {
      test.equal(solve(succeed), null);
      test.equal(solve(fail), null);
      return test.done();
    },
    "test not succeed fail": function(test) {
      test.equal(solve(notp(succeed)), null);
      test.equal(solve(notp(fail)), null);
      return test.done();
    },
    "test not print": function(test) {
      test.equal(solve(notp(print_(1))), null);
      return test.done();
    },
    "test unify 1 1, 1 2": function(test) {
      test.equal(solve(unify(1, 1)), true);
      test.equal(solve(unify(1, 2)), false);
      return test.done();
    },
    "test unify a 1": function(test) {
      var a;

      a = vari('a');
      test.equal(solve(unify(a, 1)), true);
      a = vari('a');
      test.equal(solve(andp(unify(a, 1), unify(a, 2))), false);
      a = vari('a');
      test.equal(solve(orp(andp(unify(a, 1), unify(a, 2)), unify(a, 2))), true);
      return test.done();
    },
    "test unify logicvar": function(test) {
      var a;

      a = vari('a');
      test.equal(solve(unify(a, 1)), true);
      a = vari('a');
      test.equal(solve(andp(unify(a, 1), unify(a, 2))), false);
      a = vari('a');
      test.equal(solve(orp(andp(unify(a, 1), unify(a, 2)), unify(a, 2))), true);
      a = vari('a');
      test.equal(solve(orp(unify(a, 1), unify(a, 2))), true);
      return test.done();
    },
    "test macro": function(test) {
      var orpm, same;

      same = macro(1, function(x) {
        return x;
      });
      orpm = macro(2, function(x, y) {
        return orp(x, y);
      });
      test.equal(solve(same(1)), 1);
      test.equal(solve(same(print_(1))), null);
      test.equal(solve(orpm(fail, print_(2))), null);
      return test.done();
    },
    "test unify var": function(test) {
      var a;

      a = vari('a');
      test.equal(solve(unify(a, 1)), true);
      test.equal(solve(andp(unify(a, 1))), true);
      test.equal(solve(andp(unify(a, 1), unify(a, 2))), false);
      test.equal(solve(andp(unify(a, 1), unify(a, 2), unify(a, 2))), false);
      a.binding = a;
      test.equal(solve(orp(andp(unify(a, 1), unify(a, 2)), unify(a, 2))), true);
      test.equal(solve(orp(andp(unify(a, 1), unify(a, 2)))), false);
      return test.done();
    },
    "test rule": function(test) {
      var r;

      r = rule(2, function(x, y) {
        return [[x, y], 1, null];
      });
      test.equal(solve(r(1, 1)), 1);
      test.equal(core.status, core.SUCCESS);
      return test.done();
    },
    "test rule2": function(test) {
      var r;

      r = rule(2, function(x, y) {
        return [[1, 2], print_(1), [1, 1], print_(2)];
      });
      test.equal(solve(r(1, 1)), null);
      return test.done();
    },
    "test findall once": function(test) {
      var result, x;

      x = vari('x');
      result = vari('result');
      test.equal(solve(findall(orp(print_(1), print_(2)))), null);
      test.equal(solve(findall(orp(print_(1), print_(2), print_(3)))), null);
      test.deepEqual(solve(andp(findall(orp(unify(x, 1), unify(x, 2)), result, x), result)), [1, 2]);
      test.deepEqual(solve(andp(findall(fail, result, x), result)), []);
      test.deepEqual(solve(andp(findall(succeed, result, 1), result)), [1]);
      test.deepEqual(solve(andp(findall(once(orp(print_(1), print_(2))), result, 1), result)), [1]);
      test.equal(core.status, core.SUCCESS);
      return test.done();
    }
  };

}).call(this);

/*
//@ sourceMappingURL=test_directlogic.map
*/
